# Daily News Clipping Application

A flask web app to automate compilation of cybersecurity related news. There are currently two versions: a "production" server on deployed at [pythonanywhere](http://tlebryk1.pythonanywhere.com/) on the "pythonanywhere" branch on github. This version currently only supports manual form entry. Contact your supervisor for Theo's contact information and he will send you the password for accessing the site over [Signal](https://signal.org/download/). This version persists old clippings through a mysql server also managed on pythonanywhere. 
The second version can be hosted locally. The most recent version does not have use a database (although may eventually require one), The local version can be paired with a zotero translation server to autopopulate metadata give a url and supports auto-rank. Instructions for using the application will be sent over email. 

## Directory navigation:
- [`cybernews/spiders/`](cybernews/spiders/): web scrapers for various websites. Currently supports scrapers for Middle East Round up and Cybersecurity roundup (scrapers are not running on prod right now but can be run locally). Directions on running spiders from command line can be found on [`scrapy.org`](https://docs.scrapy.org/en/latest/intro/tutorial.html).  

- [`app`](app/): flask app module. Run with `run.py`. Currently only manual form entry is up on prod. Url metadata autopopulation using a local zotero translation server is available in the local version. 

- [`notebooks/`](notebooks/) contains code to train learning-to-rank models to rank articles by relevancy (as determined by past news clippings). `Ranking.ipynb` has the code for the most up to date learning-to-rank model. Word embedding model currenly under development.

## Further direcitons
For `app.py` to run properly locally, you should set an environment variable FLASKKEY with a random value. A random key can generated by typing:
```
python

import uuid

flaskkey = uuid.uuid4().hex 
```

Copy the printed value and close python (usually control z)
Follow the OS specific instructuctions for setting an environment variable. 
- [windows](https://www.dowdandassociates.com/blog/content/howto-set-an-environment-variable-in-windows-command-line-and-registry/)
- [bash](https://devconnected.com/set-environment-variable-bash-how-to/)


    